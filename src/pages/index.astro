---
import Layout from '../layouts/Layout.astro';
---

<Layout>

  <video id="randomVideo" autoplay controls muted></video>
  <!-- <button id="closeBtn">❌</button> -->
  <button id="playWithSoundBtn">🔊</button>
  <button id="randomBtn">🔁</button>
  <button id="logout" onclick="localStorage.removeItem('unlocked'); location.href='/'">🚫</button>

  <div id="filterPanel">
    <h3>Filter Videos</h3>
  </div>

  <script is:inline>
   
    const videoFolders = {
    cute_int: [
        'videos/cute_int/1740996463087.mp4',
        'videos/cute_int/1744362753007.mp4',
        'videos/cute_int/1745892573107.mp4',
        'videos/cute_int/IMG_5289.MP4',
        'videos/cute_int/IMG_7798.MP4',
        'videos/cute_int/RDT_20250120_072718.mp4',
        'videos/cute_int/RDT_20250401_002220.mp4',
        'videos/cute_int/RDT_20250406_101941.mp4',
        'videos/cute_int/RDT_20250616_235020 - Copy.mp4',
        'videos/cute_int/VID-20250402-WA0000.mp4',
        'videos/cute_int/video_2025-07-01_14-06-45.mp4',
        'videos/cute_int/VID_20240919_222751_358.mp4',
        'videos/cute_int/VID_20250126_125324_158.mp4',
        'videos/cute_int/VID_20250129_232928_866.mp4',
        'videos/cute_int/VID_20250227_234932_048.mp4',
        'videos/cute_int/VID_20250528_023536_769.mp4',
        'videos/cute_int/VID_20250622_233352_782 - Copy.mp4',
    ],
    d: [
        'videos/d/VID_20241129_233642_418.mp4',
        'videos/d/VID_20241129_233854_469.mp4',
        'videos/d/VID_20250130_225643_929.mp4',
        'videos/d/VID_20250408_000555_905.mp4',
    ],
    fin: [
        'videos/fin/10_චීස්_🥹.mp4',
        'videos/fin/6584785 - Copy.mp4',
        'videos/fin/Fingerin.mp4',
        'videos/fin/RDT_20250612_003237 - Trim.mp4',
        'videos/fin/video-290-steptodown.com.mp4',
        'videos/fin/video-921-steptodown.com.mp4',
        'videos/fin/VID_20250523_022313_427.mp4',
        'videos/fin/VID_20250523_022426_196.mp4',
        'videos/fin/VID_20250523_023223_035.mp4',
        'videos/fin/VID_20250526_000642_044.mp4',
        'videos/fin/VID_20250526_000705_451.mp4',
        'videos/fin/VID_20250526_000916_584.mp4',
        'videos/fin/VID_20250526_001057_256.mp4',
        'videos/fin/VID_20250527_013251_427.mp4',
        'videos/fin/VID_20250527_013355_142.mp4',
        'videos/fin/VID_20250527_013414_255.mp4',
        'videos/fin/VID_20250527_013551_096.mp4',
        'videos/fin/VID_20250528_020953_652.mp4',
        'videos/fin/VID_20250528_021017_171.mp4',
        'videos/fin/VID_20250528_021240_248.mp4',
        'videos/fin/VID_20250528_021325_072.mp4',
        'videos/fin/VID_20250528_021735_636.mp4',
        'videos/fin/VID_20250528_021748_010.mp4',
        'videos/fin/VID_20250528_021759_249.mp4',
        'videos/fin/VID_20250528_021811_094.mp4',
        'videos/fin/VID_20250528_021923_607.mp4',
        'videos/fin/VID_20250528_021957_527.mp4',
        'videos/fin/VID_20250607_004523_922.mp4',
        'videos/fin/VID_20250607_004727_111.mp4',
        'videos/fin/VID_20250617_230642_051.mp4',
        'videos/fin/VID_20250618_225834_086.mp4',
        'videos/fin/VID_20250618_225904_226.mp4',
        'videos/fin/VID_20250618_225935_168.mp4',
        'videos/fin/VID_20250625_074621_762 - Copy.mp4',
        'videos/fin/VID_20250625_075537_647.mp4',
        'videos/fin/VID_20250625_075614_333.mp4',
        'videos/fin/VID_20250626_080107_962.mp4',
        'videos/fin/VID_20250626_080122_011.mp4',
    ],
    finger2: [
        'videos/finger2/2023-03-12-14-03-50.mp4',
        'videos/finger2/5Xt9Xwcr_720p.mp4',
        'videos/finger2/A8mYLJxA_720p.mp4',
        'videos/finger2/A_Asian_girl__Extrem...turbat_4.mp4',
        'videos/finger2/document5093644884489798955 (1).mp4',
        'videos/finger2/document5140953197635961732.mp4',
        'videos/finger2/HGJvQnvW_720p.mp4',
        'videos/finger2/Inna_baa_kollo_1.mp4',
        'videos/finger2/Kandy_Sri_Lanka_Musl..._Clips.mp4',
        'videos/finger2/My_Pink_Pussy_2_4.mp4',
        'videos/finger2/oldsoupyazurevasesponge.mp4',
        'videos/finger2/OOSY0448.MP4',
        'videos/finger2/RDT_20250120_075034.mp4',
        'videos/finger2/s2Msk88K_720p.mp4',
        'videos/finger2/sri_lankan_girl_agili_fun_juice_enakan_3.mp4',
        'videos/finger2/Sri_Lankan_girl_fingering_2.mp4',
        'videos/finger2/sri_lankan_girl_fingering_her_pussey_1.mp4',
        'videos/finger2/Sri_Lankan_girl_nude_selfie_video_2.mp4',
        'videos/finger2/Sri_lankan_Girl_Pussy_Show_2.mp4',
        'videos/finger2/videeo-701-steptodown.com - Trim.mp4',
        'videos/finger2/video-522.mp4',
        'videos/finger2/video-540.mp4',
        'videos/finger2/video-701-steptodown.com - Trim.mp4',
        'videos/finger2/video-701-steptodown.comm - Trim.mp4',
        'videos/finger2/video-701-steptodownn.com - Trim.mp4',
        'videos/finger2/video-701-stepttodown.com - Trim.mp4',
        'videos/finger2/Video.mp4',
        'videos/finger2/video46.mp4',
        'videos/finger2/VID_20241129_232923_075.mp4',
        'videos/finger2/VID_20241129_232929_354.mp4',
        'videos/finger2/VID_20241129_233753_721.mp4',
        'videos/finger2/VID_20241203_221601_560.mp4',
        'videos/finger2/VID_20241210_001509_726.mp4',
        'videos/finger2/VID_20241213_074233_423.mp4',
        'videos/finger2/VID_20241218_091019_108.mp4',
        'videos/finger2/VID_20241218_091734_740.mp4',
        'videos/finger2/VID_20241218_091804_677.mp4',
        'videos/finger2/VID_20241218_091928_970.mp4',
        'videos/finger2/VID_20241222_014808_219.mp4',
        'videos/finger2/VID_20241223_164216_111.mp4',
        'videos/finger2/VID_20241223_164222_657.mp4',
        'videos/finger2/VID_20241223_164728_391.mp4',
        'videos/finger2/VID_20241224_153857_249.mp4',
        'videos/finger2/VID_20241224_153912_294.mp4',
        'videos/finger2/VID_20241224_154151_374.mp4',
        'videos/finger2/VID_20241225_232609_502.mp4',
        'videos/finger2/VID_20241225_232722_583.mp4',
        'videos/finger2/VID_20241225_232734_116.mp4',
        'videos/finger2/VID_20250108_233857_267.mp4',
        'videos/finger2/VID_20250124_004026_804.mp4',
        'videos/finger2/VID_20250124_011433_985.mp4',
        'videos/finger2/VID_20250124_011528_817.mp4',
        'videos/finger2/VID_20250124_011535_544.mp4',
        'videos/finger2/VID_20250124_011944_465.mp4',
        'videos/finger2/VID_20250124_012438_608.mp4.mov.mp4',
        'videos/finger2/VID_20250203_073515_272.mp4',
        'videos/finger2/VID_20250219_233720_631.mp4',
        'videos/finger2/VID_20250228_142647_918.mp4',
        'videos/finger2/VID_20250408_084818_258.mp4',
        'videos/finger2/VID_20250421_094812_190.mp4',
        'videos/finger2/VID_20250421_095017_017.mp4',
        'videos/finger2/VID_20250423_001518_986.mp4',
        'videos/finger2/VID_20250514_232928_966.mp4',
        'videos/finger2/VID_20250523_023324_155.mp4',
        'videos/finger2/VID_20250523_023410_836.mp4',
        'videos/finger2/VID_20250528_022124_303.mp4',
        'videos/finger2/VID_20250615_012941_168.mp4',
        'videos/finger2/WGAT4451.MP4',
        'videos/finger2/xORSqhYL_720p.mp4',
        'videos/finger2/කොහොමද_ඒ_ඇගිලි_සොමිය🥵.mp4',
        'videos/finger2/වම්බටු_ආතල්_8_MMINUTES🥵😍.mp4',
        'videos/finger2/සුදු_අම්මි_කොල්ලට_යවපු_Video_එක🥵.mp4',
        'videos/finger2/සුදු_නෝනාගේ_එක🥵.mp4',
    ],
    leak: [
        'videos/leak/video03.mp4',
        'videos/leak/VID_20241121_231022_278.mp4',
        'videos/leak/VID_20241218_091117_991.mp4',
        'videos/leak/YouCut_20241122_013317114.mp4',
    ],
    PE: [
        'videos/PE/1740509529416.mp4',
        'videos/PE/1749720511544.mp4',
        'videos/PE/open-uri20221020-340779-v56tlm.mp4',
        'videos/PE/RDT_20250117_082413 - Copy.mp4',
        'videos/PE/VID_20250124_224710_115.mp4',
        'videos/PE/VID_20250327_225447_364.mp4',
        'videos/PE/VID_20250527_021359_075.mp4',
        'videos/PE/VID_20250528_021532_397.mp4',
        'videos/PE/VID_20250607_004425_646.mp4',
        'videos/PE/VID_20250608_235445_770.mp4',
        'videos/PE/VID_20250608_235710_553.mp4',
        'videos/PE/VID_20250609_055040_652.mp4',
        'videos/PE/VID_20250609_055322_162.mp4',
        'videos/PE/VID_20250609_055444_500.mp4',
        'videos/PE/VID_20250609_055455_179.mp4',
        'videos/PE/VID_20250609_055604_311.mp4',
        'videos/PE/VID_20250609_055822_946 - Copy.mp4',
        'videos/PE/VID_20250609_060014_686.mp4',
        'videos/PE/VID_20250609_060201_278.mp4',
        'videos/PE/VID_20250612_150500_717.mp4',
    ],
    sq: [
        'videos/sq/6584785.mp4',
        'videos/sq/document5093644884489798955.mp4',
        'videos/sq/RDT_20250612_003215.mp4',
        'videos/sq/RDT_20250612_003237 - Trim - Trim.mp4',
        'videos/sq/VID_20241231_163605_982.mp4',
        'videos/sq/VID_20250108_235759_150.mp4',
        'videos/sq/VID_20250124_012730_718.mp4',
        'videos/sq/VID_20250421_094141_197.mp4',
        'videos/sq/VID_20250625_074621_762.mp4',
    ],
};




    let allVideos = Object.values(videoFolders).flat();
    let currentCategory = null;
    let currentVideos = allVideos;

    console.log('allVideos:', allVideos);
console.log('currentVideos:', currentVideos);

    const video = document.getElementById('randomVideo');
    const filterPanel = document.getElementById('filterPanel');

    // ---- Create Filter Buttons ----
    function createFilterButtons() {
      const allBtn = document.createElement('button');
      allBtn.textContent = 'All';
      allBtn.classList.add('active', 'filter-btn');
      allBtn.onclick = () => {
        currentCategory = null;
        currentVideos = allVideos;
        updateFilterButtons();
        playRandom(false);
      };
      filterPanel.appendChild(allBtn);

      for (const category in videoFolders) {
        const btn = document.createElement('button');
        btn.textContent = category.charAt(0).toUpperCase() + category.slice(1);
        btn.classList.add('filter-btn');
        btn.onclick = () => {
          currentCategory = category;
          currentVideos = videoFolders[category];
          updateFilterButtons();
          playRandom(false);
        };
        filterPanel.appendChild(btn);
      }
    }

    // ---- Highlight Active Button ----
    function updateFilterButtons() {
      const buttons = filterPanel.querySelectorAll('button');
      buttons.forEach(btn => {
        btn.classList.remove('active');
        if ((currentCategory === null && btn.textContent === 'All') ||
            (btn.textContent.toLowerCase() === currentCategory)) {
          btn.classList.add('active');
        }
      });
    }

  

    function playRandom(goFullscreen = false) {
  if (!currentVideos || currentVideos.length === 0) {
    document.body.innerHTML = '<h2 style="color:white;">⚠️ No videos found.</h2>';
    return;
  }

  const randomSrc = currentVideos[Math.floor(Math.random() * currentVideos.length)];
  video.src = randomSrc;

  // Remove previous 'ended' event to prevent stacking multiple listeners
  video.onended = null;

  // Auto play next video when this one ends
  video.onended = () => playRandom(false);

  video.addEventListener('canplay', () => {
    if (goFullscreen) {
      const fs = video.requestFullscreen || video.webkitRequestFullscreen || video.msRequestFullscreen;
      if (fs) fs.call(video);
    }
  }, { once: true });

  video.play().catch(console.warn);
}

// document.getElementById('playWithSoundBtn').addEventListener('click', () => {
//   video.muted = false;
//   playRandom(false);
//   document.getElementById('playWithSoundBtn').style.display = 'none';
// });

const soundBtn = document.getElementById('playWithSoundBtn');

soundBtn.addEventListener('click', () => {
  if (video.muted) {
    video.muted = false;
    soundBtn.textContent = '🔊';  // show sound on icon
    video.play().catch(console.warn);
  } else {
    video.muted = true;
    soundBtn.textContent = '🔇';  // show muted icon
  }
});

    // ---- Button Event Listeners ----
    document.getElementById('randomBtn').addEventListener('click', () => playRandom(false));
    // document.getElementById('closeBtn').addEventListener('click', () => window.close());

    // ---- Init ----
    createFilterButtons();
    playRandom(true);
  </script>

</Layout>

<style>
  html, body {
    margin: 0;
    padding: 0;
    background-color: black;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  video {
    width: 100vw;
    height: 100vh;
    object-fit: contain;
    background: black;
  }

  #randomBtn, #playWithSoundBtn, #logout {
    position: fixed;
    right: 15px;
    background: #1e90ff;
    color: white;
    border: none;
    border-radius: 25%;
    padding: 8px 12px;
    font-size: 1em;
    cursor: pointer;
    z-index: 1000;
  }

  #randomBtn { bottom: 150px; }
  #playWithSoundBtn { bottom: 100px; }
  #logout    { bottom: 50px; }

  #randomBtn:hover, #playWithSoundBtn:hover, #logout:hover {
    background-color: #0b6ed1;
  }

  #filterPanel {
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    left: 0;
    width: 350px;
    height: 100%;
    background-color: #222;
    padding: 20px 10px;
    box-sizing: border-box;
    overflow-y: auto;
    transition: transform 0.3s ease;
    transform: translateX(-330px);
    z-index: 11000;
    border-top-right-radius: 12px;
    border-bottom-right-radius: 12px;
  }

  #filterPanel:hover {
    transform: translateX(0);
  }

  #filterPanel h3 {
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 2em;
    text-align: center;
  }

  #filterPanel .filter-btn {
    width: 50%;
    height: 20px;
    margin-bottom: 100px;
    padding: 10px;
    border: none;
    border-radius: 8px;
    background-color: #1e90ff;
    color: white;
    font-size: 2em;
    cursor: pointer;
    transition: background-color 0.3s ease;
    z-index: 11000;
  }

  #filterPanel .filter-btn:hover,
  #filterPanel .filter-btn.active {
    background-color: #0b6ed1;
  }
</style>
